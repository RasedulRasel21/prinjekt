{{ 'section-3d-print-order.css' | asset_url | stylesheet_tag }}

<section class="print-order-section">
  <div class="print-order-container">
    <div class="print-order-content">
      <!-- Left Side Content -->
      <div class="print-order-left">
        <h1 class="print-order-title">{{ section.settings.heading }}</h1>
        <p class="print-order-description">{{ section.settings.description }}</p>
        <a href="{{ section.settings.button_link }}" class="print-order-button">
          {{ section.settings.button_text }}
        </a>
      </div>

      <!-- Right Side Content (Tabs + Image) -->
      <div class="print-order-right">
        <div class="print-order-right-inner">
          <!-- Features Tabs (Left) -->
          <div class="print-order-image-wrapper">
            {% for block in section.blocks %}
              <img 
                src="{{ block.settings.image | img_url: 'master' }}" 
                alt="{{ block.settings.feature_text }}"
                class="print-order-image {% if forloop.first %}active{% endif %}"
                data-feature="{{ forloop.index }}"
              >
            {% endfor %}
          </div>

          <!-- Image Container (Right) -->
          <div class="print-order-features">
            {% for block in section.blocks %}
              <div class="feature-item {% if forloop.first %}active{% endif %}" data-feature="{{ forloop.index }}">
                <div class="feature-icon">
                  {{ block.settings.icon }}
                </div>
                <span class="feature-text">{{ block.settings.feature_text }}</span>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const featureItems = document.querySelectorAll('.feature-item');
    const images = document.querySelectorAll('.print-order-image');

    featureItems.forEach(item => {
      item.addEventListener('click', function() {
        const featureIndex = this.getAttribute('data-feature');

        // Remove active class from all items and images
        featureItems.forEach(f => f.classList.remove('active'));
        images.forEach(img => img.classList.remove('active'));

        // Add active class to clicked item and corresponding image
        this.classList.add('active');
        document.querySelector(`.print-order-image[data-feature="${featureIndex}"]`).classList.add('active');
      });
    });
  });
</script>

{% schema %}
{
  "name": "3D Print Order",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "BESTELLEN SIE JETZT IHREN DRUCK!"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Bestellen Sie jetzt Ihren 3D-Druck bei uns und erleben Sie den Unterschied! Wir fertigen Ihr Produkt vor Ort mit modernsten, hochwertigen Druckern und senden es schnellstmöglich an Sie. Unsere 3D-Drucker sind auf dem neuesten Stand der Technik und gewährleisten höchste Präzision und Detailtreue. Wir verwenden ausschließlich hochwertiges Material, um sicherzustellen, dass Ihr Produkt nicht nur gut aussieht, sondern auch langlebig und funktional ist."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "JETZT KONFIGURIEREN"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        {
          "type": "html",
          "id": "icon",
          "label": "Icon (SVG or HTML)",
          "default": "<svg width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><path d='M12 2L2 7l10 5 10-5-10-5z'/><path d='M2 17l10 5 10-5M2 12l10 5 10-5'/></svg>"
        },
        {
          "type": "text",
          "id": "feature_text",
          "label": "Feature Text",
          "default": "Hochwertige Lösungen"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Feature Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "3D Print Order",
      "blocks": [
        {
          "type": "feature",
          "settings": {
            "icon": "<svg width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><path d='M12 2L2 7l10 5 10-5-10-5z'/><path d='M2 17l10 5 10-5M2 12l10 5 10-5'/></svg>",
            "feature_text": "Hochwertige Lösungen"
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "<svg width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><circle cx='12' cy='12' r='10'/><polyline points='12 6 12 12 16 14'/></svg>",
            "feature_text": "Schnelles Prototyping"
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "<svg width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><rect x='3' y='3' width='7' height='7'/><rect x='14' y='3' width='7' height='7'/><rect x='14' y='14' width='7' height='7'/><rect x='3' y='14' width='7' height='7'/></svg>",
            "feature_text": "Viele Modelle"
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "<svg width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><path d='M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z'/></svg>",
            "feature_text": "Individuelle Reparatur"
          }
        }
      ]
    }
  ]
}
{% endschema %}