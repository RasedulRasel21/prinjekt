{% comment %}
  Hero: Photo (40%) + rich headline (60%)
  Dynamic tokens in headline:
    {brand}, {experts}, {domain}, {city}, {unique}
{% endcomment %}
<section
  id="about-hero-target"
  class="prinjekt-hero"
  style="
    --accent: {{ section.settings.accent_color }};
    --card-bg: {{ section.settings.background_color }};
    --radius: {{ section.settings.corner_radius }}px;
  "
>
  {{ 'section-prinjekt-hero.css' | asset_url | stylesheet_tag }}

  <div class="ph-wrapper" id="hero_photo">
    <div class="ph-card">
      <div class="ph-grid">
        <figure class="ph-media">
          {% if section.settings.image != blank %}
            {%- assign img = section.settings.image -%}
            <img
              srcset="{{ img | image_url: width: 480 }} 480w,
                      {{ img | image_url: width: 768 }} 768w,
                      {{ img | image_url: width: 1100 }} 1100w,
                      {{ img | image_url: width: 1600 }} 1600w"
              sizes="(max-width: 980px) 100vw, 40vw"
              src="{{ img | image_url: width: 1100 }}"
              alt="{{ section.settings.image_alt | escape }}"
              width="{{ img.width }}"
              height="{{ img.height }}"
              loading="lazy"
            >
          {% else %}
            <div class="ph-media--placeholder" aria-hidden="true"></div>
          {% endif %}
        </figure>

        <div class="ph-content">
          {%- capture rendered_headline -%}
            {%- assign t = section.settings.headline_template -%}
            {%- assign t = t
              | replace: '{brand}', '<span class="accent">' | append: section.settings.brand | append: '</span>'
              | replace: '{experts}', '<span class="accent">' | append: section.settings.experts | append: '</span>'
              | replace: '{domain}', '<span class="accent">' | append: section.settings.domain | append: '</span>'
              | replace: '{city}', section.settings.city
              | replace: '{unique}', '<span class="accent">' | append: section.settings.unique | append: '</span>'
            -%}
            {{ t }}
          {%- endcapture -%}

          <h2 class="ph-heading">
            {{ rendered_headline }}
          </h2>

          {% if section.settings.description != blank %}
            <div class="ph-desc rte">
              {{ section.settings.description }}
            </div>
          {% endif %}

          {% if section.settings.btn_label != blank %}
            <div class="ph-actions">
              <a
                {% if section.settings.btn_link != blank %}
                  href="{{ section.settings.btn_link }}"
                {% else %}
                  role="link" aria-disabled="true"
                {% endif %}
                class="ph-btn"
              >
                {{ section.settings.btn_label }}
              </a>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Hero Photo",
  "class": "section-hero-prinjekt",
  "settings": [
    { "type": "image_picker", "id": "image", "label": "Left image" },
    { "type": "text", "id": "image_alt", "label": "Image alt text", "default": "Team photo" },

    { "type": "header", "content": "Headline" },
    {
      "type": "textarea",
      "id": "headline_template",
      "label": "Headline template",
      "default": "Hi! Wir sind {brand}, sind {experts} im {domain} aus {city} und machen aus Deinem Design ein {unique}!"
    },
    { "type": "text", "id": "brand", "label": "{brand}", "default": "Prinjekt" },
    { "type": "text", "id": "experts", "label": "{experts}", "default": "Experten" },
    { "type": "text", "id": "domain", "label": "{domain}", "default": "3D-Druck" },
    { "type": "text", "id": "city", "label": "{city}", "default": "Hannover" },
    { "type": "text", "id": "unique", "label": "{unique}", "default": "einzigartiges 3D-Element!" },

    { "type": "richtext", "id": "description", "label": "Paragraph", "default": "<p>Seit 2015 liefern wir maßgeschneiderte Lösungen in der Serienfertigung. Unser Name verbindet <em>printing</em> und <em>injection-molding</em> und spiegelt unsere Expertise wider.</p>" },

    { "type": "header", "content": "Button" },
    { "type": "text", "id": "btn_label", "label": "Button label", "default": "Jetzt Bestellen" },
    { "type": "url", "id": "btn_link", "label": "Button link" },

    { "type": "header", "content": "Style" },
    { "type": "color", "id": "accent_color", "label": "Accent color", "default": "#fdb347" },
    { "type": "color", "id": "background_color", "label": "Card background", "default": "#ffffff" },
    { "type": "range", "id": "corner_radius", "label": "Corner radius", "min": 0, "max": 28, "step": 2, "default": 18 }
  ],
  "blocks": [],
  "presets": [{ "name": "Hero Photo" }]
}
{% endschema %}
